

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SRAT - Static Resource Affinity Table &mdash; CXL: Boot To Bash  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../../../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=187304be"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=582ca9e2"></script>
      <script src="../../../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script data-domain="coderefinery.github.io" defer="defer" src="https://plausible.cs.aalto.fi/js/script.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="HMAT - Heterogeneous Memory Attribute Table" href="../hmat/" />
    <link rel="prev" title="CEDT - CXL Early Discovery Table" href="../cedt/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../" class="icon icon-home">
            CXL: Boot To Bash
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../">CXL on Linux: Boot To Bash</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../devices/device-types/">Devices and Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devices/uefi/">UEFI Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platform Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../bios-and-efi/">BIOS/EFI Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">ACPI Tables</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cedt/">CEDT - CXL Early Discovery Table</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SRAT - Static Resource Affinity Table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#proximity-domain">Proximity Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-affinity">Memory Affinity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-initiator-port">Generic Initiator / Port</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hmat/">HMAT - Heterogeneous Memory Attribute Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slit/">SLIT - System Locality Information Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dsdt/">DSDT - Differentiated system Description Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#acpi-debugging">ACPI Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../example-configs/">Example Platform Configurations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Linux Kernel Configuration:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/overview/">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/early-boot/">Linux Init (Early Boot)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/cxl-driver/">CXL Driver Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/dax-driver/">DAX Driver Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/memory-hotplug/">Memory Hotplug</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Memory Allocation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../allocation/dax/">DAX Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../allocation/page-allocator/">The Page Allocator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../allocation/reclaim/">Reclaim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../allocation/hugepages/">Huge Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../allocation/tiering/">Memory Tiering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../use-case/memory-expansion/">Memory Expansion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../use-case/dynamic-capacity/">Dynamic Capacity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../use-case/virtual-machines/">Virtual Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../use-case/shared-memory/">Shared Memory</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../">CXL: Boot To Bash</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../">ACPI Tables</a></li>
      <li class="breadcrumb-item active">SRAT - Static Resource Affinity Table</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/gourryinverse/cxl-boot-to-bash/blob/main/doc/platform/acpi/srat.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="srat-static-resource-affinity-table">
<h1>SRAT - Static Resource Affinity Table<a class="headerlink" href="#srat-static-resource-affinity-table" title="Link to this heading"></a></h1>
<p>The System/Static Resource Affinity Table describes resource (CPU, Memory) affinity to “Proximity Domains”. This table is technically optional, but for performance information (see “HMAT”) to be enumerated by linux it must be present.</p>
<p>There is a careful dance between the CEDT and SRAT tables and how NUMA nodes are created.  If things don’t look quite the way you expect - check the SRAT Memory Affinity entries and CEDT CFMWS to determine what your platform actually supports in terms of flexible topologies.</p>
<p>The SRAT may statically assign portions of a CFMWS SPA range to a specific proximity domains.  See linux numa creation for more information about how this presents in the NUMA topology.</p>
<section id="proximity-domain">
<h2>Proximity Domain<a class="headerlink" href="#proximity-domain" title="Link to this heading"></a></h2>
<p>A proximity domain is ROUGHLY equivalent to “NUMA Node” - though a 1-to-1 mapping is not guaranteed.  There are scenarios where “Proximity Domain 4” may map to “NUMA Node 3”, for example.  (See “NUMA Node Creation”)</p>
</section>
<section id="memory-affinity">
<h2>Memory Affinity<a class="headerlink" href="#memory-affinity" title="Link to this heading"></a></h2>
<p>Generally speaking, if a host does any amount of CXL fabric (decoder) programming in BIOS - an SRAT entry for that memory needs to be present.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="n">Subtable</span> <span class="n">Type</span> <span class="p">:</span> <span class="mi">01</span> <span class="p">[</span><span class="n">Memory</span> <span class="n">Affinity</span><span class="p">]</span>
               <span class="n">Length</span> <span class="p">:</span> <span class="mi">28</span>
     <span class="n">Proximity</span> <span class="n">Domain</span> <span class="p">:</span> <span class="mi">00000001</span>          <span class="o">&lt;-</span> <span class="n">NUMA</span> <span class="n">Node</span> <span class="mi">1</span>
            <span class="n">Reserved1</span> <span class="p">:</span> <span class="mi">0000</span>
         <span class="n">Base</span> <span class="n">Address</span> <span class="p">:</span> <span class="mi">000000</span><span class="n">C050000000</span>  <span class="o">&lt;-</span> <span class="n">Physical</span> <span class="n">Memory</span> <span class="n">Region</span>
       <span class="n">Address</span> <span class="n">Length</span> <span class="p">:</span> <span class="mi">0000003</span><span class="n">CA0000000</span>
            <span class="n">Reserved2</span> <span class="p">:</span> <span class="mi">00000000</span>
<span class="n">Flags</span> <span class="p">(</span><span class="n">decoded</span> <span class="n">below</span><span class="p">)</span> <span class="p">:</span> <span class="mi">0000000</span><span class="n">B</span>
             <span class="n">Enabled</span> <span class="p">:</span> <span class="mi">1</span>
       <span class="n">Hot</span> <span class="n">Pluggable</span> <span class="p">:</span> <span class="mi">1</span>
        <span class="n">Non</span><span class="o">-</span><span class="n">Volatile</span> <span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="generic-initiator-port">
<h2>Generic Initiator / Port<a class="headerlink" href="#generic-initiator-port" title="Link to this heading"></a></h2>
<p>todo</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../cedt/" class="btn btn-neutral float-left" title="CEDT - CXL Early Discovery Table" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../hmat/" class="btn btn-neutral float-right" title="HMAT - Heterogeneous Memory Attribute Table" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Gregory Price.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>